!function(t){function e(e){return"".trim?e.val().trim():t.trim(e.val())}t.fn.isHappy=function(n){function r(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(e){var r=n.classes&&n.classes.message||"unhappyMessage";return t('<span id="'+e.id+'" class="'+r+'" role="alert">'+e.message+"</span>")}function s(t){return r(n.errorTemplate)?n.errorTemplate(t):i(t)}function a(t){var e,i,s=!1;for(e=0,i=p.length;i>e;e+=1)p[e].testValid(!0)||(s=!0);return s?(r(n.unHappy)&&n.unHappy(t),!1):n.testMode?(r(n.happy)&&n.happy(t),window.console&&console.warn("would have submitted"),!1):void(r(n.happy)&&n.happy(t))}function u(){c=!1}function o(){c=!0,t(window).bind("mouseup",u)}function l(i,a){var u=t(a),o={message:i.message||"",id:a.slice(1)+"_unhappy"},l=(t(o.id).length>0?t(o.id):s(o),function(){c?t(window).bind("mouseup",u.testValid.bind(this)):u.testValid()});p.push(u),u.testValid=function(s){var a,o,l=t(this),d=i.errorTarget&&t(i.errorTarget)||l,p=!1,c=!!l.get(0).attributes.getNamedItem("required")||i.required,h="password"===u.attr("type"),m=r(i.arg)?i.arg():i.arg,f=n.classes&&n.classes.field||"unhappy";return l.length>1?(a=[],l.each(function(e,n){a.push(t(n).val())}),a=a.join(",")):(a=r(i.clean)?i.clean(l.val()):!h&&"undefined"==typeof i.trim||i.trim?e(l):l.val(),l.val(a)),o=(a.length>0||"sometimes"===c)&&r(i.test),s===!0&&c===!0&&0===a.length?p=!0:o&&(p=!i.test(a,m)),d=d.parents(".form-group"),p?(d.addClass(f),!1):(d.removeClass(f),!0)},u.bind(i.when||n.when||"blur",l)}var d,p=[],c=!1;for(d in n.fields)l(n.fields[d],d);return t(n.submitButton||this).bind("mousedown",o),n.submitButton?t(n.submitButton).click(a):this.bind("submit",a),this}}(this.jQuery||this.Zepto);var formHappy={USPhone:function(t){return/^\(?(\d{3})\)?[\- ]?\d{3}[\- ]?\d{4}$/.test(t)},date:function(t){return/^(?:0[1-9]|1[0-2])\/(?:0[1-9]|[12][0-9]|3[01])\/(?:\d{4})/.test(t)},email:function(t){return/^(?:\w+\.?\+?)*\w+@(?:\w+\.)+\w+$/.test(t)},minLength:function(t,e){return t.length>=e},maxLength:function(t,e){return t.length<=e},betweenLength:function(t,e){return t.length&&t.length<=e.max&&t.length>=e.min},equal:function(t,e){return t==e}};